<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>영상 음성 변환기</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎬</text></svg>">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎬 영상 음성 변환기</h1>
            <p>영상/음성을 텍스트로 자동 변환해드립니다</p>
            
            <!-- 네비게이션 -->
            <nav class="main-nav">
                <button id="navHome" class="nav-btn active">🏠 홈</button>
                <button id="navDashboard" class="nav-btn">📊 대시보드</button>
                <button id="navSettings" class="nav-btn">⚙️ 설정</button>
            </nav>
        </header>

        <!-- 모드 선택 화면 -->
        <div id="modeSelection" class="mode-selection">
            <div class="mode-card" id="recordMode">
                <div class="mode-icon">🎤</div>
                <h2>마이크로 녹음하기</h2>
                <p>실시간으로 음성을 녹음하고<br>텍스트로 변환합니다</p>
                <button class="mode-btn">시작하기</button>
            </div>
            <div class="mode-card" id="uploadMode">
                <div class="mode-icon">📁</div>
                <h2>파일 업로드하기</h2>
                <p>영상/음성 파일을 업로드하고<br>텍스트로 변환합니다</p>
                <button class="mode-btn">시작하기</button>
            </div>
        </div>

        <!-- 녹음 화면 -->
        <div id="recordSection" class="section hidden">
            <div class="record-container">
                <button id="backToModeFromRecord" class="back-btn">← 돌아가기</button>
                
                <div class="record-status">
                    <div class="record-visualizer">
                        <div class="record-icon" id="recordIcon">🎤</div>
                        <div class="record-pulse" id="recordPulse"></div>
                    </div>
                    <h2 id="recordStatusText">녹음 준비</h2>
                    <p id="recordTime" class="record-time">00:00</p>
                </div>

                <div class="record-controls">
                    <button id="startRecordBtn" class="btn-record">
                        <span class="btn-icon">⏺</span>
                        녹음 시작
                    </button>
                    <button id="stopRecordBtn" class="btn-stop hidden">
                        <span class="btn-icon">⏹</span>
                        녹음 중지
                    </button>
                    <button id="processRecordBtn" class="btn-process hidden">
                        <span class="btn-icon">✨</span>
                        변환 시작
                    </button>
                </div>

                <div id="recordInfo" class="record-info">
                    <p>💡 녹음 버튼을 눌러 시작하세요</p>
                    <p>🔴 녹음 중일 때 중지 버튼을 눌러 완료하세요</p>
                </div>
            </div>
        </div>

        <!-- 파일 업로드 화면 -->
        <div id="uploadSection" class="section hidden">
            <button id="backToModeFromUpload" class="back-btn">← 돌아가기</button>
            
            <div class="upload-area">
                <div id="dropZone" class="drop-zone">
                    <div class="drop-zone-content">
                        <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                        </svg>
                        <h2>파일을 드래그하거나 클릭하세요</h2>
                        <p class="file-types">
                            <strong>영상:</strong> MP4, MOV, AVI, MKV<br>
                            <strong>음성:</strong> MP3, WAV, M4A, FLAC<br>
                            <strong>텍스트:</strong> TXT
                        </p>
                        <p class="multiple-info">💡 여러 파일을 한번에 선택 가능합니다</p>
                    </div>
                    <input type="file" id="fileInput" accept=".mp4,.mov,.avi,.mkv,.mp3,.wav,.m4a,.flac,.ogg,.aac,.wma,.opus,.webm,.txt" multiple hidden>
                </div>

                <div id="progressSection" class="progress-section hidden">
                    <div id="filesProgress"></div>
                </div>
            </div>
        </div>

        <!-- 결과 화면 -->
        <div id="resultSection" class="result-section hidden">
            <button id="backToModeFromResult" class="back-btn">← 새로 시작하기</button>
            
            <div class="result-header">
                <h2>변환 결과</h2>
                <button id="downloadAllBtn" class="btn-download">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                    </svg>
                    전체 다운로드
                </button>
            </div>
            <div id="resultsContainer"></div>
        </div>

        <!-- 대시보드 화면 -->
        <div id="dashboardSection" class="section hidden">
            <div class="dashboard-header">
                <h2>📊 내 파일 관리</h2>
                <div class="dashboard-actions">
                    <input type="text" id="searchInput" class="search-input" placeholder="🔍 파일 검색...">
                    <button id="newFileBtn" class="btn-new-file">+ 새로 추가</button>
                </div>
            </div>

            <div class="dashboard-toolbar">
                <div class="checkbox-actions">
                    <button id="selectAllBtn" class="btn-toolbar">전체 선택</button>
                    <button id="deselectAllBtn" class="btn-toolbar">전체 해제</button>
                </div>
                <div class="bulk-actions">
                    <button id="downloadSelectedBtn" class="btn-toolbar primary">📥 선택 다운로드</button>
                    <button id="deleteSelectedBtn" class="btn-toolbar danger">🗑️ 선택 삭제</button>
                </div>
            </div>

            <div id="filesTable" class="files-table">
                <div class="loading">파일 목록을 불러오는 중...</div>
            </div>
        </div>

        <!-- 설정 화면 -->
        <div id="settingsSection" class="section hidden">
            <h2>⚙️ 설정</h2>
            
            <div class="settings-card">
                <h3>🤖 Gemini API 키</h3>
                <p class="settings-desc">AI 요약 기능을 사용하려면 Google Gemini API 키가 필요합니다.</p>
                
                <div class="api-key-status">
                    <span id="apiKeyStatus">❌ API 키가 설정되지 않음</span>
                </div>
                
                <div class="api-key-input-group">
                    <input type="password" id="apiKeyInput" class="api-key-input" placeholder="Gemini API 키를 입력하세요">
                    <button id="saveApiKeyBtn" class="btn-save-key">저장</button>
                </div>
                
                <div class="settings-info">
                    <p><strong>API 키 발급 방법:</strong></p>
                    <ol>
                        <li><a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a>에 접속</li>
                        <li>"Get API Key" 또는 "Create API Key" 클릭</li>
                        <li>생성된 키를 복사하여 위에 입력</li>
                        <li>"저장" 버튼 클릭</li>
                    </ol>
                    <p class="note">💡 입력한 API 키는 현재 세션에만 저장됩니다. 브라우저를 닫으면 다시 입력해야 합니다.</p>
                </div>
            </div>
        </div>

        <!-- 파일 상세 모달 -->
        <div id="fileModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalFilename"></h3>
                    <button class="modal-close">×</button>
                </div>
                
                <div class="modal-tabs">
                    <button class="tab-btn active" data-tab="original">원본</button>
                    <button class="tab-btn" data-tab="general">일반 요약</button>
                    <button class="tab-btn" data-tab="meeting">회의록</button>
                    <button class="tab-btn" data-tab="lecture">강의 요약</button>
                    <button class="tab-btn" data-tab="youtube">영상 요약</button>
                    <button class="tab-btn" data-tab="conversation">대화 요약</button>
                </div>
                
                <div id="modalBody" class="modal-body">
                    <div class="tab-content active" data-content="original">
                        <div class="loading">로딩 중...</div>
                    </div>
                    <div class="tab-content" data-content="general">
                        <div class="summary-placeholder">요약 생성 버튼을 클릭하세요</div>
                    </div>
                    <div class="tab-content" data-content="meeting">
                        <div class="summary-placeholder">요약 생성 버튼을 클릭하세요</div>
                    </div>
                    <div class="tab-content" data-content="lecture">
                        <div class="summary-placeholder">요약 생성 버튼을 클릭하세요</div>
                    </div>
                    <div class="tab-content" data-content="youtube">
                        <div class="summary-placeholder">요약 생성 버튼을 클릭하세요</div>
                    </div>
                    <div class="tab-content" data-content="conversation">
                        <div class="summary-placeholder">요약 생성 버튼을 클릭하세요</div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button id="modalDownloadBtn" class="btn-action">📥 txt 파일 다운로드</button>
                    <button id="modalSummarizeBtn" class="btn-action primary">✨ 요약 생성</button>
                    <button id="modalDeleteSummaryBtn" class="btn-action warning">🗑️ 요약 삭제</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
